var r=require("@emnapi/wasi-threads");const e="undefined"!=typeof WebAssembly?WebAssembly:"undefined"!=typeof WXWebAssembly?WXWebAssembly:void 0;function t(r){if(r&&"object"!=typeof r)throw new TypeError("imports must be an object or undefined");return!0}function n(r,a){if(!r)throw new TypeError("Invalid wasm source");t(a),a=null!=a?a:{};try{const e="object"==typeof r&&null!==r&&"then"in r?r.then:void 0;if("function"==typeof e)return e.call(r,r=>n(r,a))}catch(r){}if(r instanceof ArrayBuffer||ArrayBuffer.isView(r))return e.instantiate(r,a);if(r instanceof e.Module)return e.instantiate(r,a).then(e=>({instance:e,module:r}));if("undefined"!=typeof Response&&r instanceof Response)return r.arrayBuffer().then(r=>e.instantiate(r,a));const o="string"==typeof r;if(o||"undefined"!=typeof URL&&r instanceof URL){if(o&&"undefined"!=typeof wx&&"undefined"!=typeof __wxConfig)return e.instantiate(r,a);if("function"!=typeof fetch)throw new TypeError("wasm source can not be a string or URL in this environment");if("function"!=typeof e.instantiateStreaming)return n(fetch(r),a);try{return e.instantiateStreaming(fetch(r),a).catch(()=>n(fetch(r),a))}catch(e){return n(fetch(r),a)}}throw new TypeError("Invalid wasm source")}function a(t){var n=function(){var n,a,o,s,i,u="object"==typeof process&&null!==process&&"object"==typeof process.versions&&null!==process.versions&&"string"==typeof process.versions.node,c=Boolean(t.childThread),f="number"==typeof t.waitThreadStart?t.waitThreadStart:Boolean(t.waitThreadStart);function l(r){if("function"==typeof e.RuntimeError)throw new e.RuntimeError(r);throw Error(r)}var d,p,v,g={imports:{env:{},napi:{},emnapi:{}},exports:{},emnapi:{},loaded:!1,filename:"",childThread:c,initWorker:void 0,executeAsyncWork:void 0,waitThreadStart:f,PThread:void 0,init:function(r){if(g.loaded)return g.exports;if(!r)throw new TypeError("Invalid napi init options");var t=r.instance;if(!(null==t?void 0:t.exports))throw new TypeError("Invalid wasm instance");n=t;var u=t.exports,c=r.module,f=r.memory||u.memory,v=r.table||u.__indirect_function_table;if(!(c instanceof e.Module))throw new TypeError("Invalid wasm module");if(!(f instanceof e.Memory))throw new TypeError("Invalid wasm memory");if(!(v instanceof e.Table))throw new TypeError("Invalid wasm table");if(a=f,o=v,"function"!=typeof u.malloc)throw new TypeError("malloc is not exported");if("function"!=typeof u.free)throw new TypeError("free is not exported");if(s=u.malloc,i=u.free,!g.childThread){var y=8,h=t.exports.node_api_module_get_api_version_v1;"function"==typeof h&&(y=h());var E=g.envObject||(g.envObject=d.createEnv(g.filename,y,function(r){return o.get(r)},function(r){return o.get(r)},l,p)),_=d.openScope(E);try{E.callIntoModule(function(r){var e=g.exports,n=_.add(e),a=(0,t.exports.napi_register_wasm_v1)(r.id,n.id);g.exports=a?d.handleStore.get(a).value:e})}catch(r){if("unwind"!==r)throw r}finally{d.closeScope(E,_)}return g.loaded=!0,delete g.envObject,g.exports}}},y=void 0;if(c){d=null==t?void 0:t.context;var h="function"==typeof t.postMessage?t.postMessage:"function"==typeof postMessage?postMessage:void 0;if("function"!=typeof h)throw new TypeError("No postMessage found");g.postMessage=h}else{var E=t.context;if("object"!=typeof E||null===E)throw new TypeError("Invalid `options.context`. Use `import { getDefaultContext } from '@emnapi/runtime'`");d=E}if("string"==typeof t.filename&&(g.filename=t.filename),"function"==typeof t.onCreateWorker&&(y=t.onCreateWorker),"function"==typeof t.print?t.print:console.log.bind(console),v="function"==typeof t.printErr?t.printErr:console.warn.bind(console),"nodeBinding"in t){var _=t.nodeBinding;if("object"!=typeof _||null===_)throw new TypeError("Invalid `options.nodeBinding`. Use @emnapi/node-binding package");p=_}var w=0;if("asyncWorkPoolSize"in t){if("number"!=typeof t.asyncWorkPoolSize)throw new TypeError("options.asyncWorkPoolSize must be a integer");(w=t.asyncWorkPoolSize|0)>1024?w=1024:w<-1024&&(w=-1024)}var L=!c&&w<=0;function m(){return Math.abs(w)}function b(r){if(!r)return!1;if(r._emnapiSendListener)return!0;var e=function(r){var e=(u?r:r.data).__emnapi__;if(e&&"async-send"===e.type)if(c){(0,g.postMessage)({__emnapi__:e})}else{var t=e.payload.callback;o.get(t)(e.payload.data)}};return r._emnapiSendListener={handler:e,dispose:function(){u?r.off("message",e):r.removeEventListener("message",e,!1),delete r._emnapiSendListener}},u?r.on("message",e):r.addEventListener("message",e,!1),!0}g.imports.env._emnapi_async_work_pool_size=m,g.emnapi.addSendListener=b;var S=new r.ThreadManager(c?{printErr:v,childThread:!0}:{printErr:v,beforeLoad:function(r){b(r)},reuseWorker:t.reuseWorker,onCreateWorker:y});function C(r,e){d.feature.setImmediate(function(){o.get(r)(e)})}function A(r,e){Promise.resolve().then(function(){o.get(r)(e)})}function I(r,e){var t,n=[e>>>0,(t=e,+Math.abs(t)>=1?t>0?(0|Math.min(+Math.floor(t/4294967296),4294967295))>>>0:~~+Math.ceil((t-+(~~t>>>0))/4294967296)>>>0:0)],o=new DataView(a.buffer);o.setInt32(r,n[0],!0),o.setInt32(r+4,n[1],!0)}g.PThread=S;var k,V=Object.freeze({__proto__:null,$emnapiSetValueI64:I,_emnapi_call_finalizer:function(r,e,t,n,a){d.envStore.get(e).callFinalizerInternal(r,t,n,a)},_emnapi_callback_into_module:function(r,e,t,n,a){var s=d.envStore.get(e),i=d.openScope(s);try{s.callbackIntoModule(Boolean(r),function(){o.get(t)(e,n)})}catch(r){throw d.closeScope(s,i),a&&d.closeScope(s),r}d.closeScope(s,i)},_emnapi_close_handle_scope:function(r){return d.closeScope()},_emnapi_ctx_decrease_waiting_request_counter:function(){d.decreaseWaitingRequestCounter()},_emnapi_ctx_increase_waiting_request_counter:function(){d.increaseWaitingRequestCounter()},_emnapi_get_node_version:function(r,e,t){var n="object"==typeof process&&null!==process&&"object"==typeof process.versions&&null!==process.versions&&"string"==typeof process.versions.node?process.versions.node.split(".").map(function(r){return Number(r)}):[0,0,0],o=new DataView(a.buffer);o.setUint32(r,n[0],!0),o.setUint32(e,n[1],!0),o.setUint32(t,n[2],!0)},_emnapi_get_now:function(){return performance.timeOrigin+performance.now()},_emnapi_is_main_browser_thread:function(){return"undefined"==typeof window||"undefined"==typeof document||u?0:1},_emnapi_is_main_runtime_thread:function(){return c?0:1},_emnapi_next_tick:A,_emnapi_open_handle_scope:function(){return d.openScope().id},_emnapi_runtime_keepalive_pop:function(){},_emnapi_runtime_keepalive_push:function(){},_emnapi_set_immediate:C,_emnapi_unwind:function(){throw"unwind"},napi_clear_last_error:function(r){return d.envStore.get(r).clearLastError()},napi_set_last_error:function(r,e,t,n){return d.envStore.get(r).setLastError(e,t,n)}});function U(r){var e=new DataView(a.buffer).getInt32(r+20,!0);return S.pthreads[e]}var T=new Promise(function(r){k=function(){T.ready=!0,r()}});T.ready=!1;var D=Object.freeze({__proto__:null,_emnapi_after_uvthreadpool_ready:function(r,e,t){T.ready?o.get(r)(e,t):T.then(function(){o.get(r)(e,t)})},_emnapi_async_send_js:function(r,e,t){if(c)(0,g.postMessage)({__emnapi__:{type:"async-send",payload:{callback:e,data:t}}});else switch(r){case 0:C(e,t);break;case 1:A(e,t)}},_emnapi_emit_async_thread_ready:function(){c&&(0,g.postMessage)({__emnapi__:{type:"async-thread-ready",payload:{}}})},_emnapi_tell_js_uvthreadpool:function(r,e){for(var t=[],n=new DataView(a.buffer),o=function(e){var a=U(n.getUint32(r+4*e,!0));t.push(new Promise(function(r){var e=function(t){var n=(u?t:t.data).__emnapi__;n&&"async-thread-ready"===n.type&&(r(),a&&"function"==typeof a.unref&&a.unref(),u?a.off("message",e):a.removeEventListener("message",e))};u?a.on("message",e):a.addEventListener("message",e)}))},s=0;s<e;s++)o(s);Promise.all(t).then(k)},_emnapi_worker_unref:function(r){if(!c){var e=U(r);e&&"function"==typeof e.unref&&e.unref()}}});var B=Object.freeze({__proto__:null,napi_adjust_external_memory:function(r,e,t){if(!r)return 1;var n=d.envStore.get(r);if(!t)return n.setLastError(1);var o=Number(e);if(o<0)return n.setLastError(1);var s=a.buffer.byteLength,i=s+o;return i+=(65536-i%65536)%65536,-1===a.grow(i-s+65535>>16)?n.setLastError(9):(d.feature.supportBigInt?new DataView(a.buffer).setBigInt64(t,BigInt(a.buffer.byteLength),!0):I(t,a.buffer.byteLength),n.clearLastError())}}),x={idGen:{},values:[void 0],queued:new Set,pending:[],init:function(){var r={nextId:1,list:[],generate:function(){var e;return r.list.length?e=r.list.shift():(e=r.nextId,r.nextId++),e},reuse:function(e){r.list.push(e)}};x.idGen=r,x.values=[void 0],x.queued=new Set,x.pending=[]},create:function(r,e,t,n,a,o){var s=0,i=0;if(p){var u=p.node.emitAsyncInit(e,t,-1);s=u.asyncId,i=u.triggerAsyncId}var c=x.idGen.generate();return x.values[c]={env:r,id:c,resource:e,asyncId:s,triggerAsyncId:i,status:0,execute:n,complete:a,data:o},c},callComplete:function(r,e){var t=r.complete,n=r.env,a=r.data,s=function(){if(t){var r=d.envStore.get(n),s=d.openScope(r);try{r.callbackIntoModule(!0,function(){o.get(t)(n,e,a)})}finally{d.closeScope(r,s)}}};p?p.node.makeCallback(r.resource,s,[],{asyncId:r.asyncId,triggerAsyncId:r.triggerAsyncId}):s()},queue:function(r){var e=x.values[r];if(e&&0===e.status){if(e.status=1,x.queued.size>=(Math.abs(w)||4))return void x.pending.push(r);x.queued.add(r);var t=e.env,n=e.data,a=e.execute;e.status=2,d.feature.setImmediate(function(){if(o.get(a)(t,n),x.queued.delete(r),e.status=3,d.feature.setImmediate(function(){x.callComplete(e,0)}),x.pending.length>0){var s=x.pending.shift();x.values[s].status=0,x.queue(s)}})}},cancel:function(r){var e=x.pending.indexOf(r);if(-1!==e){var t=x.values[r];return t&&1===t.status?(t.status=4,x.pending.splice(e,1),d.feature.setImmediate(function(){x.callComplete(t,11)}),0):9}return 9},remove:function(r){var e=x.values[r];e&&(p&&p.node.emitAsyncDestroy({asyncId:e.asyncId,triggerAsyncId:e.triggerAsyncId}),x.values[r]=void 0,x.idGen.reuse(r))}};function R(r,e,t,n){if(p){var o=d.handleStore.get(r).value,s=d.handleStore.get(e).value,i=p.node.emitAsyncInit(o,s,t),u=i.asyncId,c=i.triggerAsyncId;if(n){var f=new DataView(a.buffer);f.setFloat64(n,u,!0),f.setFloat64(n+8,c,!0)}}}function j(r,e){p&&p.node.emitAsyncDestroy({asyncId:r,triggerAsyncId:e})}var G=Object.freeze({__proto__:null,_emnapi_async_destroy_js:function(r){if(!p)return 9;var e=new DataView(a.buffer),t=e.getInt32(r,!0),n=e.getInt32(r+4,!0),o=BigInt(t>>>0)|BigInt(n)<<BigInt(32),s=p.napi.asyncDestroy(o);return 0!==s.status?s.status:0},_emnapi_async_init_js:function(r,e,t){if(!p)return 9;var n;r&&(n=Object(d.handleStore.get(r).value));var o=d.handleStore.get(e).value,s=p.napi.asyncInit(n,o);if(0!==s.status)return s.status;var i=s.value;i>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&i<BigInt(1)<<BigInt(63)||(i&=(BigInt(1)<<BigInt(64))-BigInt(1))>=BigInt(1)<<BigInt(63)&&(i-=BigInt(1)<<BigInt(64));var u=Number(i&BigInt(4294967295)),c=Number(i>>BigInt(32)),f=new DataView(a.buffer);return f.setInt32(t,u,!0),f.setInt32(t+4,c,!0),0},_emnapi_env_check_gc_access:function(r){d.envStore.get(r).checkGCAccess()},_emnapi_node_emit_async_destroy:j,_emnapi_node_emit_async_init:R,_emnapi_node_make_callback:function(r,e,t,n,o,s,i,u){var c,f=0;if(p){var l=d.handleStore.get(e).value,v=d.handleStore.get(t).value;o>>>=0;for(var g=Array(o),y=new DataView(a.buffer);f<o;f++){var h=y.getUint32(n+4*f,!0);g[f]=d.handleStore.get(h).value}var E=p.node.makeCallback(l,v,g,{asyncId:s,triggerAsyncId:i});if(u)c=d.envStore.get(r).ensureHandleId(E),y.setUint32(u,c,!0)}},napi_close_callback_scope:function(r,e){throw new Error("napi_close_callback_scope has not been implemented yet")},napi_make_callback:function(r,e,t,n,o,s,i){var u,c=0;if(!r)return 1;var f=d.envStore.get(r);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!p)return f.setLastError(9);if(!t)return f.setLastError(1);if(o>0&&!s)return f.setLastError(1);var l=Object(d.handleStore.get(t).value),v=d.handleStore.get(n).value;if("function"!=typeof v)return f.setLastError(1);var g=new DataView(a.buffer),y=g.getInt32(e,!0),h=g.getInt32(e+4,!0),E=BigInt(y>>>0)|BigInt(h)<<BigInt(32);o>>>=0;for(var _=Array(o);c<o;c++){var w=g.getUint32(s+4*c,!0);_[c]=d.handleStore.get(w).value}var L=p.napi.makeCallback(E,l,v,_);if(L.error)throw L.error;return 0!==L.status?f.setLastError(L.status):(i&&(u=f.ensureHandleId(L.value),g.setUint32(i,u,!0)),f.getReturnStatus())}catch(r){return f.tryCatch.setError(r),f.setLastError(10)}},napi_open_callback_scope:function(r,e,t,n){throw new Error("napi_open_callback_scope has not been implemented yet")}}),z={offset:{resource:0,async_id:8,trigger_async_id:16,queue_size:24,queue:28,thread_count:32,is_closing:36,dispatch_state:40,context:44,max_queue_size:48,ref:52,env:56,finalize_data:60,finalize_cb:64,call_js_cb:68,handles_closing:72,async_ref:76,mutex:80,cond:84,end:88},init:function(){if(void 0!==S){S.unusedWorkers.forEach(z.addListener),S.runningWorkers.forEach(z.addListener);var r=S.getNewWorker;S.getNewWorker=function(){var e=r.apply(this,arguments);return z.addListener(e),e}}},addListener:function(r){if(!r)return!1;if(r._emnapiTSFNListener)return!0;var e=function(r){var e=(u?r:r.data).__emnapi__;if(e){var t=e.type,n=e.payload;"tsfn-send"===t&&z.dispatch(n.tsfn)}};return r._emnapiTSFNListener={handler:e,dispose:function(){u?r.off("message",e):r.removeEventListener("message",e,!1),delete r._emnapiTSFNListener}},u?r.on("message",e):r.addEventListener("message",e,!1),!0},initQueue:function(r){var e=s(8);return!!e&&(new Uint8Array(a.buffer,e,8).fill(0),z.storeSizeTypeValue(r+z.offset.queue,e,!1),!0)},destroyQueue:function(r){var e=z.loadSizeTypeValue(r+z.offset.queue,!1);e&&i(e)},pushQueue:function(r,e){var t=z.loadSizeTypeValue(r+z.offset.queue,!1),n=z.loadSizeTypeValue(t,!1),a=z.loadSizeTypeValue(t+4,!1),o=s(8);if(!o)throw new Error("OOM");z.storeSizeTypeValue(o,e,!1),z.storeSizeTypeValue(o+4,0,!1),0===n&&0===a?(z.storeSizeTypeValue(t,o,!1),z.storeSizeTypeValue(t+4,o,!1)):(z.storeSizeTypeValue(a+4,o,!1),z.storeSizeTypeValue(t+4,o,!1)),z.addQueueSize(r)},shiftQueue:function(r){var e=z.loadSizeTypeValue(r+z.offset.queue,!1),t=z.loadSizeTypeValue(e,!1);if(0===t)return 0;var n=t,a=z.loadSizeTypeValue(t+4,!1);z.storeSizeTypeValue(e,a,!1),0===a&&z.storeSizeTypeValue(e+4,0,!1),z.storeSizeTypeValue(n+4,0,!1);var o=z.loadSizeTypeValue(n,!1);return i(n),z.subQueueSize(r),o},push:function(r,e,t){var n=z.getMutex(r),a=z.getCond(r),o=function(){var e=z.getQueueSize(r),t=z.getMaxQueueSize(r),n=z.getIsClosing(r);return e>=t&&t>0&&!n},s="undefined"!=typeof window&&"undefined"!=typeof document&&!u;return n.execute(function(){for(;o();){if(0===t)return 15;if(s)return 21;a.wait()}return z.getIsClosing(r)?0===z.getThreadCount(r)?1:(z.subThreadCount(r),16):(z.pushQueue(r,e),z.send(r),0)})},getMutex:function(r){var e=r+z.offset.mutex,t={lock:function(){var r="undefined"!=typeof window&&"undefined"!=typeof document&&!u,t=new Int32Array(a.buffer,e,1);if(r)for(;;){if(0===Atomics.compareExchange(t,0,0,1))return}else for(;;){if(0===Atomics.compareExchange(t,0,0,1))return;Atomics.wait(t,0,1)}},unlock:function(){var r=new Int32Array(a.buffer,e,1);if(1!==Atomics.compareExchange(r,0,1,0))throw new Error("Tried to unlock while not holding the mutex");Atomics.notify(r,0,1)},execute:function(r){t.lock();try{return r()}finally{t.unlock()}}};return t},getCond:function(r){var e=r+z.offset.cond,t=z.getMutex(r);return{wait:function(){var r=new Int32Array(a.buffer,e,1),n=Atomics.load(r,0);t.unlock(),Atomics.wait(r,0,n),t.lock()},signal:function(){var r=new Int32Array(a.buffer,e,1);Atomics.add(r,0,1),Atomics.notify(r,0,1)}}},getQueueSize:function(r){return z.loadSizeTypeValue(r+z.offset.queue_size,!0)},addQueueSize:function(r){var e,t,n=z.offset.queue_size;e=new Uint32Array(a.buffer),t=r+n>>2,Atomics.add(e,t,1)},subQueueSize:function(r){var e,t,n=z.offset.queue_size;e=new Uint32Array(a.buffer),t=r+n>>2,Atomics.sub(e,t,1)},getThreadCount:function(r){return z.loadSizeTypeValue(r+z.offset.thread_count,!0)},addThreadCount:function(r){var e,t,n=z.offset.thread_count;e=new Uint32Array(a.buffer),t=r+n>>2,Atomics.add(e,t,1)},subThreadCount:function(r){var e,t,n=z.offset.thread_count;e=new Uint32Array(a.buffer),t=r+n>>2,Atomics.sub(e,t,1)},getIsClosing:function(r){return Atomics.load(new Int32Array(a.buffer),r+z.offset.is_closing>>2)},setIsClosing:function(r,e){Atomics.store(new Int32Array(a.buffer),r+z.offset.is_closing>>2,e)},getHandlesClosing:function(r){return Atomics.load(new Int32Array(a.buffer),r+z.offset.handles_closing>>2)},setHandlesClosing:function(r,e){Atomics.store(new Int32Array(a.buffer),r+z.offset.handles_closing>>2,e)},getDispatchState:function(r){return Atomics.load(new Uint32Array(a.buffer),r+z.offset.dispatch_state>>2)},getContext:function(r){return z.loadSizeTypeValue(r+z.offset.context,!1)},getMaxQueueSize:function(r){return z.loadSizeTypeValue(r+z.offset.max_queue_size,!0)},getEnv:function(r){return z.loadSizeTypeValue(r+z.offset.env,!1)},getCallJSCb:function(r){return z.loadSizeTypeValue(r+z.offset.call_js_cb,!1)},getRef:function(r){return z.loadSizeTypeValue(r+z.offset.ref,!1)},getResource:function(r){return z.loadSizeTypeValue(r+z.offset.resource,!1)},getFinalizeCb:function(r){return z.loadSizeTypeValue(r+z.offset.finalize_cb,!1)},getFinalizeData:function(r){return z.loadSizeTypeValue(r+z.offset.finalize_data,!1)},loadSizeTypeValue:function(r,e){var t;return e?(t=new Uint32Array(a.buffer),Atomics.load(t,r>>2)):(t=new Int32Array(a.buffer),Atomics.load(t,r>>2))},storeSizeTypeValue:function(r,e,t){var n;return t?(n=new Uint32Array(a.buffer),void Atomics.store(n,r>>2,e)):(n=new Int32Array(a.buffer),void Atomics.store(n,r>>2,e>>>0))},destroy:function(r){z.destroyQueue(r);var e=z.getEnv(r),t=d.envStore.get(e),n=z.getRef(r);n&&d.refStore.get(n).dispose(),d.removeCleanupHook(t,z.cleanup,r),t.unref();var o=r+z.offset.async_ref>>2,s=new Int32Array(a.buffer);Atomics.load(s,o)&&(Atomics.store(s,o,0),d.decreaseWaitingRequestCounter());var u=z.getResource(r);if