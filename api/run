#!/usr/bin/env python3
"""
Fleet Management API - Direct Executable
========================================
This file can be run directly on Rock S0: ./main.py
"""

import os
import sys

# Add the current directory to Python path for imports
current_dir = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, current_dir)

# Import and run the main application
if __name__ == "__main__":
    try:
        # Import the main FastAPI application
        from main import app
        import uvicorn
        
        print("ğŸš€ Starting Fleet Management API on Rock S0...")
        print("ğŸŒ Access at: http://localhost:8000/fleet-management")
        print("ğŸ“š API docs: http://localhost:8000/docs")
        print("â¹ï¸  Stop with Ctrl+C")
        
        # Run the server
        uvicorn.run(
            "main:app", 
            host="0.0.0.0", 
            port=8000, 
            reload=False,  # Disable reload for production
            access_log=True
        )
        
    except KeyboardInterrupt:
        print("\nğŸ›‘ Server stopped by user")
    except ImportError as e:
        print(f"âŒ Import error: {e}")
        print("ğŸ’¡ Make sure to install dependencies: pip3 install -r requirements.txt")
    except Exception as e:
        print(f"âŒ Error starting server: {e}")
        sys.exit(1)
