# =============================================================================
# ArkNet Fleet System - Root Configuration
# =============================================================================
# Single source of truth for infrastructure and launcher settings
# Business data (routes, depots, vehicles) lives in Strapi database
#
# DEPENDENCY ARCHITECTURE:
# - All subsystems depend on Strapi (database/API)
# - Vehicle Simulator → Strapi + GPSCentCom
# - Commuter Service → Strapi + Geospatial (includes Manifest API on port 4000)
# - GPSCentCom → Independent (no dependencies)
# - Geospatial → Independent (no dependencies)
#
# NOTE: Dependency health checks are planned but not yet implemented.
#       Start services in correct order: Strapi → Services → Simulators

[launcher]
# Which subsystems to start with start_all_systems.py
# Note: Each subsystem checks its own dependencies at runtime
enable_gpscentcom = true
enable_geospatial = true
enable_vehicle_simulator = true
enable_commuter_service = true

# Console window spawning (separate terminal for each service)
# Set to true to spawn each service in its own console window
# Windows: Opens new cmd.exe window with service title
# Linux: Uses gnome-terminal, xterm, konsole, or xfce4-terminal (auto-detected)
# Note: When console spawning is enabled, logs are NOT captured by the service manager
spawn_console_strapi = true
spawn_console_gpscentcom = true
spawn_console_geospatial = true
spawn_console_vehicle_simulator = true
spawn_console_commuter_service = true

# Startup timing configuration
monitor_port = 8000
strapi_startup_wait = 15
gpscentcom_startup_wait = 10
simulator_delay = 5
service_startup_wait = 8

[infrastructure]
# Service discovery - where to find each service
# All subsystems read these values to connect to dependencies
strapi_url = http://localhost:1337
strapi_port = 1337
gpscentcom_port = 5000
geospatial_port = 6000
commuter_service_port = 4000

# Derived URLs (can be overridden if needed)
gpscentcom_http_url = http://localhost:5000
gpscentcom_ws_url = ws://localhost:5000
geospatial_url = http://localhost:6000
commuter_service_url = http://localhost:4000

# Database settings
database_host = localhost
database_port = 5432

[gpscentcom]
# GPS server runtime settings (non-business)
# Note: auth_token is a SECRET and lives in .env file
stale_after_sec = 120
cors_origins = http://localhost:3000,http://127.0.0.1:3000
log_packets = false

[geospatial]
# Geospatial service settings
cache_enabled = true
cache_ttl_seconds = 3600

[logging]
# Global logging defaults (can be overridden per subsystem)
level = INFO
format = %(asctime)s - %(name)s - %(levelname)s - %(message)s

[commuter_service]
# Commuter spawning system configuration
# 
# ⚠️ IMPORTANT: All operational settings are in the DATABASE, not here!
# Database table: operational-configurations
# Seed file: arknet_fleet_manager/operational_config_seed_data.json
#
# Operational settings in database (section: passenger_spawning.operational):
#   - continuous_mode (boolean)
#   - spawn_interval_seconds (number)
#   - enable_routespawner (boolean)
#   - enable_depotspawner (boolean)
#
# Routes and depots are queried from the database automatically.
# The system spawns for ALL routes with spawn-configs and ALL active depots.

# Infrastructure setting (cache layer)
enable_redis_cache = false

[vehicle_simulator]
# Vehicle transit simulation system
#
# ⚠️ IMPORTANT: All operational settings are in the DATABASE, not here!
# Database table: operational-configurations
# Seed file: arknet_fleet_manager/operational_config_seed_data.json
#
# Operational settings in database (sections: vehicle_simulator.*):
#   - vehicle_simulator.simulation.tick_time (number)
#   - vehicle_simulator.simulation.default_speed (number)
#   - vehicle_simulator.engine.speed_model (string: kinematic/linear)
#   - vehicle_simulator.engine.accel_limit (number)
#   - vehicle_simulator.engine.decel_limit (number)
#   - vehicle_simulator.engine.corner_slowdown (number)
#   - vehicle_simulator.gps.transmission_interval (number)
#   - vehicle_simulator.gps.enable_transmission (boolean)
#   - conductor.proximity.pickup_radius_km (number)
#   - conductor.proximity.boarding_time_window_minutes (number)
#   - conductor.stop_duration.min_seconds (number)
#   - conductor.stop_duration.max_seconds (number)
#   - conductor.stop_duration.per_passenger_boarding_time (number)
#   - conductor.stop_duration.per_passenger_disembarking_time (number)
#
# Note: arknet_transit_simulator/config/config.ini is DEPRECATED
# All settings migrated to database for centralized configuration management

